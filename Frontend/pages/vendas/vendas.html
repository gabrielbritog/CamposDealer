<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Document</title>
    <script
      src="https://code.jquery.com/jquery-3.6.1.min.js"
      integrity="sha256-o88AwQnZB+VDvE9tvIXrMQaPlFFSUTR+nldQm1LuPXQ="
      crossorigin="anonymous"
    ></script>
    <script type="text/javascript" src="../js/jquery.validate.js"></script>
    <script
      type="text/javascript"
      src="../js/localization/messages_pt_BR.js"
    ></script>

    <link
      href="https://cdn.jsdelivr.net/npm/bootstrap@5.2.2/dist/css/bootstrap.min.css"
      rel="stylesheet"
      integrity="sha384-Zenh87qX5JnK2Jl0vWa8Ck2rdkQ2Bzep5IDxbcnCeuOxjzrPF/et3URy9Bv1WTRi"
      crossorigin="anonymous"
    />
    <script type="text/javascript">
      $(document).ready(function () {
        $('#formCadastro').validate({
          rules: {
            quantidade: {
              required: true
            }
          }
        })
      })
    </script>

    <style type="text/css">
      label.error {
        color: crimson;
        padding: 8px;
      }
    </style>
  </head>
  <body>
    <h1 class="text-center p-3">Vendas</h1>
    <div class="container-md">
      <div class="border p-3">
        <div class="text-center">
          <label class="h6 text-dark" for="clienteProduto">Pesquisar</label>
          <input
            type="text"
            id="clienteProduto"
            placeholder="Digite o nome do cliente ou descrição do produto"
          />
          <button class="btn btn-primary" onclick="getVenda()">Buscar</button>
          <button class="btn btn-dark" onclick="reloadPage()">Limpar</button>
        </div>
        <br /><br />

        <div class="row border" id="vendas">
          <table>
            <tr>
              <th class="col border">Id do cliente</th>
              <th class="col border">Id do produto</th>
              <th class="col border">Quantidade</th>
              <th class="col border">Data</th>
              <th class="col border">Valor unitário</th>
              <th class="col border">Valor Total</th>
              <th class="col border">Ações</th>
            </tr>
            <tbody id="tableVenda"></tbody>
          </table>
        </div>
      </div>
    </div>

    <div class="p-3">
      <div class="text-center">
        <button
          class="btn btn-primary"
          onclick="document.getElementById('telaCadastro').classList.remove('invisible') "
        >
          Nova Venda
        </button>
      </div>

      <fieldset id="telaCadastro" class="col-md-6 offset-md-3">
        <br />
        <legend class="h3 text-dark offset-md-5 pb-3">Nova Venda</legend>
        <form id="formCadastro">
          <select class="h6 text-dark name=" clientes id="clienteId"></select>
          <select class="h6 text-dark name=" produtos id="produtoId"></select>

          <input
            type="text"
            name="quantidade"
            id="quantidade"
            placeholder="Digite a quantidade"
            onkeyup="somenteNumeros(this);"
          />

          <button
            class="btn btn-primary col-md-2 offset-md-1"
            onclick="salvarVenda()"
          >
            Salvar
          </button>
        </form>
        <button
          class="btn btn-primary col-md-2 offset-md-5"
          onclick="document.getElementById('telaCadastro').classList.add('invisible')"
        >
          Fechar
        </button>
      </fieldset>
      <br /><br />
    </div>
    <script src="script/script.js"></script>
    <script>
      listaVendas()
      listaClientes()
      listaProdutos()
    </script>
    <button
      class="btn btn-primary"
      onclick="document.location.href = '../../index.html'"
    >
      Inicio
    </button>
  </body>
</html>
